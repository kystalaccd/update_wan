# update_wan 项目描述

## 一、基本需求

* 支持广域网进行设备管理和设备升级

* 支持显示版本号


## 二、实现思路

1. 通过webseocket，在设备上线时，向服务器发送上线通知，进而与服务器建立长连接
   * 上线通知包含内容：update_wan版本信息
   * 设备号
   * 设备类型
2. 此时服务器端记录上线通知的内容，并根据通知将此设备添加进自己的设备列表中
3. 当要进行设备升级时，服务器端向设备发送升级包；
4. 升级包接收完毕后，设备端查看升级包是否符合要求，并校验升级包完整性
5. 升级包校验完毕，开始解析升级包并替换本地文件，最后重启设备


## 三、实现步骤

1. 实现websocket传输文件
2. 阅读update的源码，从中分离出解析升级包升级的部分独立成一个解析接口
3. 整合传输文件和解析文件成update_wan



## 四、后续扩展

1. 支持组播，服务器端只需要发送一次文件，即可升级在线的所有设备
2. 升级方式该文OAT方法
